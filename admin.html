<!DOCTYPE html>
<html>
<head>
<title>Med Madad | Medico Entry</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Arial;
  background:#ecfeff;
  text-align:center;
  padding-top:40px;
}
.box{
  background:white;
  max-width:320px;
  margin:auto;
  padding:25px;
  border-radius:15px;
  box-shadow:0 15px 30px rgba(0,0,0,0.15);
}
h2{ color:#0f766e; }
input,button{
  width:100%;
  padding:12px;
  margin-top:12px;
  font-size:16px;
}
button{
  background:#0f766e;
  color:white;
  border:none;
  border-radius:8px;
}
.msg{ margin-top:10px; }
</style>
</head>

<body>

<div class="box">
<h2>ü©∫ Medico Entry</h2>
<p>Issue next token</p>

<input type="password" id="pass" placeholder="Department Password">
<button onclick="issue()">Issue Token</button>

<div class="msg" id="msg"></div>
</div>

<p style="font-size:12px;margin-top:20px;">
Authorized medical staff only<br>
Created by Raj
</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
  apiKey:"YOUR_API_KEY",
  projectId:"medmadad-2a807"
});
const db = getFirestore(app);
const ref = doc(db,"departments","gynaecology");

window.issue = async ()=>{
  const snap = await getDoc(ref);
  if(pass.value !== snap.data().password){
    msg.innerText="‚ùå Invalid password";
    return;
  }
  await updateDoc(ref,{
    issuedToken: snap.data().issuedToken + 1
  });
  msg.innerText="‚úÖ Token issued successfully";
}
</script>

</body>
</html>
