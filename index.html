<!DOCTYPE html>
<html>
<head>
  <title>MedMadad â€“ Token</title>
</head>
<body>
  <h2>ğŸ¥ MedMadad â€“ Medicine Token</h2>
  <button onclick="getToken()">Get Token</button>
  <h3 id="result"></h3>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, updateDoc, getDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSy....",   // ğŸ‘ˆ YAHAN TUMHARA CONFIG
  authDomain: "smarthospitalqueue.firebaseapp.com",
  projectId: "smarthospitalqueue",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.getToken = async () => {
  const ref = doc(db, "departments", "medicine");
  await updateDoc(ref, { currentToken: increment(1) });
  const snap = await getDoc(ref);
  document.getElementById("result").innerText =
    "Your Token Number: " + snap.data().currentToken;
};
</script>
</body>
</html>
