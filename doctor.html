<!DOCTYPE html>
<html>
<head>
<title>Med Madad | Doctor Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Arial;
  background:#f0fdf4;
  text-align:center;
  padding-top:40px;
}
.panel{
  background:white;
  max-width:320px;
  margin:auto;
  padding:25px;
  border-radius:15px;
  box-shadow:0 15px 30px rgba(0,0,0,0.15);
}
button{
  width:100%;
  padding:14px;
  background:#16a34a;
  color:white;
  font-size:18px;
  border:none;
  border-radius:8px;
  margin-top:12px;
}
</style>
</head>

<body>

<div class="panel">
<h2>üë®‚Äç‚öïÔ∏è Doctor Panel</h2>
<p>Call next patient</p>

<input type="password" id="pass" placeholder="Password">
<button onclick="nextPatient()">Next Patient ‚ñ∂</button>

<p id="status"></p>
</div>

<p style="font-size:12px;margin-top:20px;">
For authorized doctors only<br>
Created by Raj
</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
  apiKey:"YOUR_API_KEY",
  projectId:"medmadad-2a807"
});
const db = getFirestore(app);
const ref = doc(db,"departments","gynaecology");

window.nextPatient = async ()=>{
  const snap = await getDoc(ref);
  if(pass.value !== snap.data().password){
    status.innerText="‚ùå Wrong password";
    return;
  }
  await updateDoc(ref,{
    runningToken: snap.data().runningToken + 1
  });
  status.innerText="‚úÖ Next patient called";
}
</script>

</body>
</html>
